(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1918:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>en});var s=a(5155),r=a(2115),i=a(5453),l=a(3464);let n="https://fakestoreapi.com";async function o(){return(await l.A.get("".concat(n,"/products"))).data}async function d(e){return(await l.A.get("".concat(n,"/products/").concat(e))).data}let c=(0,i.v)((e,t)=>({products:[],selectedProduct:null,loading:!1,likedProductIds:JSON.parse(localStorage.getItem("likedProductIds")||"[]"),removedProductIds:JSON.parse(localStorage.getItem("removedProductIds")||"[]"),setProducts(t){e({products:t})},addProduct(a){let s=[...t().products,a];e({products:s}),localStorage.setItem("customProducts",JSON.stringify(s.filter(e=>e.id>=1e5)))},setSelectedProduct(t){e({selectedProduct:t})},async fetchProducts(){e({loading:!0});try{let[a,s]=await Promise.all([o(),Promise.resolve(JSON.parse(localStorage.getItem("customProducts")||"[]"))]),r=t().removedProductIds,i=[...a,...s].filter(e=>!r.includes(e.id));e({products:i})}catch(e){console.error("Ошибка при получении продуктов:",e)}finally{e({loading:!1})}},async fetchProductById(a){e({loading:!0});try{let s=t().products.find(e=>e.id===a);if(s){e({selectedProduct:s});return}let r=await d(a);e({selectedProduct:r})}catch(e){console.error("Ошибка при получении продукта по ID:",e)}finally{e({loading:!1})}},toggleLike(a){let s=t().likedProductIds,r=s.includes(a)?s.filter(e=>e!==a):[...s,a];localStorage.setItem("likedProductIds",JSON.stringify(r)),e({likedProductIds:r})},removeProduct(a){let s=[...t().removedProductIds,a];localStorage.setItem("removedProductIds",JSON.stringify(s)),e(e=>({products:e.products.filter(e=>e.id!==a),removedProductIds:s}))},updateProduct(a){let s=t().products.map(e=>e.id===a.id?a:e);e({products:s});let r=s.filter(e=>e.id>=1e5);localStorage.setItem("customProducts",JSON.stringify(r))}}));var u=a(6766),m=a(8405),x=a(351),p=a(9982),g=a(2596),h=a(9688);function f(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,h.QP)((0,g.$)(t))}var v=a(9708);let j=(0,a(2085).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary-custom text-white shadow-xs hover:bg-text-custom",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary-custom text-white shadow-xs hover:bg-primary-custom",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:text-primary-custom"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function b(e){let{className:t,variant:a,size:r,asChild:i=!1,...l}=e,n=i?v.DX:"button";return(0,s.jsx)(n,{"data-slot":"button",className:f(j({variant:a,size:r,className:t})),...l})}function N(e){let{...t}=e;return(0,s.jsx)(p.bL,{"data-slot":"alert-dialog",...t})}function y(e){let{...t}=e;return(0,s.jsx)(p.l9,{"data-slot":"alert-dialog-trigger",...t})}function w(e){let{...t}=e;return(0,s.jsx)(p.ZL,{"data-slot":"alert-dialog-portal",...t})}function k(e){let{className:t,...a}=e;return(0,s.jsx)(p.hJ,{"data-slot":"alert-dialog-overlay",className:f("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50 !pointer-events-none",t),...a})}function P(e){let{className:t,...a}=e;return(0,s.jsxs)(w,{children:[(0,s.jsx)(k,{}),(0,s.jsx)(p.UC,{"data-slot":"alert-dialog-content",className:f("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...a})]})}function C(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-dialog-header",className:f("flex flex-col gap-2 text-center sm:text-left",t),...a})}function S(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-dialog-footer",className:f("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function z(e){let{className:t,...a}=e;return(0,s.jsx)(p.hE,{"data-slot":"alert-dialog-title",className:f("text-lg font-semibold",t),...a})}function I(e){let{className:t,...a}=e;return(0,s.jsx)(p.VY,{"data-slot":"alert-dialog-description",className:f("text-muted-foreground text-sm",t),...a})}function L(e){let{className:t,...a}=e;return(0,s.jsx)(p.rc,{className:f(j(),t),...a})}function _(e){let{className:t,...a}=e;return(0,s.jsx)(p.ZD,{className:f(j({variant:"outline"}),t),...a})}class A extends r.Component{render(){let{isLiked:e,onToggleLike:t,onRemove:a,variant:r="card"}=this.props,i="card"===r,l=i?"w-5 h-5":"w-8 h-8";return(0,s.jsxs)("div",{className:f("flex items-center gap-4",i?"absolute top-0 right-0 py-2 px-4 border-b border-l border-accent-custom rounded-bl-2xl bg-white":"flex gap-4 items-center mt-4 mb-6"),children:[(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),t()},title:"Like","aria-label":"Toggle like",children:(0,s.jsx)(x.icx,{className:"".concat(e?"text-red-500":"text-gray-400"," ").concat(l," hover:text-red-500 transition duration-500")})}),(0,s.jsxs)(N,{children:[(0,s.jsx)(y,{asChild:!0,children:(0,s.jsx)("button",{onClick:e=>e.stopPropagation(),title:"Delete","aria-label":"Delete product",children:(0,s.jsx)(x.IXo,{className:"text-xl text-gray-400 hover:text-red-600 ".concat(l)})})}),(0,s.jsxs)(P,{onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)(C,{children:[(0,s.jsx)(z,{children:"Are you sure?"}),(0,s.jsx)(I,{children:"This product will be removed from the list."})]}),(0,s.jsxs)(S,{children:[(0,s.jsx)(_,{children:"Cancel"}),(0,s.jsx)(L,{onClick:a,children:"Delete"})]})]})]})]})}}function E(e){let{product:t,className:a}=e,{likedProductIds:r,toggleLike:i,removeProduct:l,setSelectedProduct:n}=c(),o=r.includes(t.id);return(0,s.jsxs)(m.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},onClick:()=>{n(t)},className:"".concat(a," relative flex flex-col border border-accent-custom rounded-2xl cursor-pointer shadow-sm bg-white transition duration-500 transform-gpu hover:-translate-y-2"),children:[(0,s.jsx)("div",{className:"shrink-0 py-3 lg:py-4 border-b border-accent-custom",children:(0,s.jsx)(u.default,{src:t.image,alt:t.title,width:300,height:300,className:"w-full h-40 object-contain object-center mix-blend-multiply",priority:!0})}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col p-3 lg:p-4",children:[(0,s.jsx)("h3",{children:t.title}),(0,s.jsx)("p",{className:"!mt-auto line-clamp-2",children:t.description}),(0,s.jsxs)("p",{children:[(0,s.jsx)("b",{children:"Category:"})," ",t.category]}),(0,s.jsxs)("p",{className:"!mb-0 !text-base lg:!text-lg font-semibold lg:font-bold text-primary-custom text-right",children:["$",t.price]})]}),(0,s.jsx)(A,{productId:t.id,isLiked:o,onToggleLike:()=>i(t.id),onRemove:()=>l(t.id),variant:"card"})]})}var F=a(2355),q=a(3052);function D(e){let{className:t,...a}=e;return(0,s.jsx)("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:f("mx-auto flex w-full justify-center",t),...a})}function O(e){let{className:t,...a}=e;return(0,s.jsx)("ul",{"data-slot":"pagination-content",className:f("flex flex-row items-center gap-1",t),...a})}function J(e){let{...t}=e;return(0,s.jsx)("li",{"data-slot":"pagination-item",...t})}function R(e){let{className:t,isActive:a,size:r="icon",...i}=e;return(0,s.jsx)("a",{"aria-current":a?"page":void 0,"data-slot":"pagination-link","data-active":a,className:f(j({variant:a?"outline":"ghost",size:r}),t),...i})}function V(e){let{className:t,...a}=e;return(0,s.jsxs)(R,{"aria-label":"Go to previous page",size:"default",className:f("gap-1 px-2.5 sm:pl-2.5 cursor-pointer",t),...a,children:[(0,s.jsx)(F.A,{}),(0,s.jsx)("span",{className:"hidden sm:block",children:"Previous"})]})}function M(e){let{className:t,...a}=e;return(0,s.jsxs)(R,{"aria-label":"Go to next page",size:"default",className:f("gap-1 px-2.5 sm:pr-2.5 cursor-pointer",t),...a,children:[(0,s.jsx)("span",{className:"hidden sm:block",children:"Next"}),(0,s.jsx)(q.A,{})]})}var T=a(4683),B=a(6474),U=a(5196),Z=a(7863);function $(e){let{...t}=e;return(0,s.jsx)(T.bL,{"data-slot":"select",...t})}function G(e){let{...t}=e;return(0,s.jsx)(T.WT,{"data-slot":"select-value",...t})}function X(e){let{className:t,size:a="default",children:r,...i}=e;return(0,s.jsxs)(T.l9,{"data-slot":"select-trigger","data-size":a,className:f("border-primary-custom data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-10 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i,children:[r,(0,s.jsx)(T.In,{asChild:!0,children:(0,s.jsx)(B.A,{className:"size-4 opacity-50"})})]})}function Q(e){let{className:t,children:a,position:r="popper",...i}=e;return(0,s.jsx)(T.ZL,{children:(0,s.jsxs)(T.UC,{"data-slot":"select-content",className:f("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...i,children:[(0,s.jsx)(Y,{}),(0,s.jsx)(T.LM,{className:f("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,s.jsx)(H,{})]})})}function W(e){let{className:t,children:a,...r}=e;return(0,s.jsxs)(T.q7,{"data-slot":"select-item",className:f("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex text-text-custom w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(T.VF,{children:(0,s.jsx)(U.A,{className:"size-4"})})}),(0,s.jsx)(T.p4,{children:a})]})}function Y(e){let{className:t,...a}=e;return(0,s.jsx)(T.PP,{"data-slot":"select-scroll-up-button",className:f("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(Z.A,{className:"size-4"})})}function H(e){let{className:t,...a}=e;return(0,s.jsx)(T.wn,{"data-slot":"select-scroll-down-button",className:f("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(B.A,{className:"size-4"})})}function K(e){let{className:t,type:a,...r}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:f("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-primary-custom flex h-10 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-text-custom shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...r})}function ee(){let{products:e,fetchProducts:t,loading:a,likedProductIds:i}=c(),[l,n]=(0,r.useState)(!1),[o,d]=(0,r.useState)(1),[u,m]=(0,r.useState)(6),[x,p]=(0,r.useState)("all"),[g,h]=(0,r.useState)(""),[f,v]=(0,r.useState)(""),[j,N]=(0,r.useState)(""),y=["all",...new Set(e.map(e=>e.category))];(0,r.useEffect)(()=>{0===e.length&&t()},[e.length,t]),(0,r.useEffect)(()=>{d(1)},[l,x,g,f]);let w=e;l&&(w=w.filter(e=>i.includes(e.id))),"all"!==x&&(w=w.filter(e=>e.category===x)),g&&(w=w.filter(e=>e.price>=parseFloat(g))),f&&(w=w.filter(e=>e.price<=parseFloat(f))),j.trim()&&(w=w.filter(e=>e.title.toLowerCase().includes(j.toLowerCase())));let k="all"===u?1:Math.ceil(w.length/u),P="all"===u?0:(o-1)*u,C="all"===u?w:w.slice(P,P+u);return(0,s.jsx)("div",{className:"products-page",children:(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("div",{className:"mb-4 lg:mb-6 flex justify-between items-center flex-wrap gap-4",children:(0,s.jsx)("h1",{className:"!mb-0",children:"Products"})}),(0,s.jsxs)("div",{className:"flex items-center flex-wrap mb-4 lg:mb-6 gap-3 md:gap-4",children:[(0,s.jsx)(K,{type:"text",placeholder:"Search by title...",value:j,onChange:e=>{N(e.target.value),d(1)},className:"w-full md:w-fit"}),(0,s.jsxs)($,{value:x,onValueChange:e=>{p(e),d(1)},children:[(0,s.jsx)(X,{className:"w-full md:w-auto",children:(0,s.jsx)(G,{placeholder:"Category"})}),(0,s.jsx)(Q,{children:y.map(e=>(0,s.jsx)(W,{value:e,children:e[0].toUpperCase()+e.slice(1)},e))})]}),(0,s.jsx)(K,{type:"number",placeholder:"Min price",value:g,onChange:e=>h(e.target.value),className:"w-full md:w-[160px]"}),(0,s.jsx)(K,{type:"number",placeholder:"Max price",value:f,onChange:e=>v(e.target.value),className:"w-full md:w-[160px]"}),(0,s.jsx)(b,{variant:"default",onClick:()=>n(e=>!e),className:"hidden md:block",children:l?"Show All":"Show Favorites"}),(0,s.jsx)(b,{variant:"default",size:"sm",onClick:()=>n(e=>!e),className:"block md:hidden",children:l?"Show All":"Show Favorites"}),(0,s.jsx)(b,{variant:"default",onClick:()=>{N(""),p("all"),h(""),v(""),n(!1),d(1)},className:"hidden md:block",children:"Reset Filters"}),(0,s.jsx)(b,{variant:"default",size:"sm",onClick:()=>{N(""),p("all"),h(""),v(""),n(!1),d(1)},className:"block md:hidden",children:"Reset Filters"})]}),a&&(0,s.jsx)("p",{children:"Loading products..."}),!a&&0===C.length&&(0,s.jsx)("p",{children:"No products to display."}),(0,s.jsx)("div",{className:"flex flex-wrap gap-y-4 md:gap-4 lg:gap-6",children:C.map(e=>(0,s.jsx)(E,{product:e,className:"w-full md:w-[calc(100%/2-8px)] lg:w-[calc(100%/3-16px)]"},e.id))}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between mt-4 lg:mt-6",children:[(0,s.jsxs)($,{defaultValue:"6",onValueChange:e=>{d(1),m("all"===e?"all":parseInt(e))},children:[(0,s.jsx)(X,{children:(0,s.jsx)(G,{placeholder:"Per page"})}),(0,s.jsxs)(Q,{children:[(0,s.jsx)(W,{value:"6",children:"6 per page"}),(0,s.jsx)(W,{value:"12",children:"12 per page"}),(0,s.jsx)(W,{value:"24",children:"24 per page"}),(0,s.jsx)(W,{value:"32",children:"32 per page"}),(0,s.jsx)(W,{value:"all",children:"All"})]})]}),k>1&&(0,s.jsx)(D,{className:"w-fit mt-4 md:m-0",children:(0,s.jsxs)(O,{children:[(0,s.jsx)(J,{className:"cursor-pointer",children:(0,s.jsx)(V,{onClick:()=>d(e=>Math.max(e-1,1)),className:1===o?"pointer-events-none opacity-50":""})}),Array.from({length:k},(e,t)=>(0,s.jsx)(J,{className:"cursor-pointer",children:(0,s.jsx)(R,{isActive:o===t+1,onClick:()=>d(t+1),className:"cursor-pointer",children:t+1})},t)),(0,s.jsx)(J,{className:"cursor-pointer",children:(0,s.jsx)(M,{onClick:()=>d(e=>Math.min(e+1,k)),className:o===k?"pointer-events-none opacity-50":""})})]})})]})]})})}let et=e=>{let{onEdit:t}=e,{selectedProduct:a,likedProductIds:r,toggleLike:i,removeProduct:l,setSelectedProduct:n}=c(),o=!!a&&r.includes(a.id);return a?(0,s.jsx)("div",{className:"product-page",children:(0,s.jsxs)("div",{className:"flex flex-wrap",children:[(0,s.jsx)("div",{className:"w-full md:w-1/3 flex shrink-0 items-center justify-center mb-4 md:mb-0 md:mr-8 bg-white rounded-2xl",children:(0,s.jsx)(u.default,{src:a.image,alt:a.title,width:500,height:500,className:"w-[80%] h-[80%] object-contain object-center rounded-md mix-blend-multiply",priority:!0})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h1",{className:"md-4 md:!mb-6",children:a.title}),(0,s.jsx)("p",{children:a.description}),(0,s.jsxs)("p",{className:"font-semibold",children:["Price: $",a.price]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Category:"})," ",(0,s.jsx)("span",{className:"italic",children:a.category})]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Rating:"})," ⭐ ",a.rating.rate," (",a.rating.count," reviews)"]}),(0,s.jsx)(A,{productId:a.id,isLiked:o,onToggleLike:()=>i(a.id),onRemove:()=>{l(a.id),n(null)},variant:"page"}),(0,s.jsx)(b,{size:"lg",onClick:t,className:"mt-4",children:"Edit"})]})]})}):(0,s.jsx)("div",{className:"p-10",children:"Product not found."})};var ea=a(2177);function es(e){let{className:t,...a}=e;return(0,s.jsx)("textarea",{"data-slot":"textarea",className:f("border-primary-custom placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-text-custom shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...a})}class er extends r.Component{render(){let{onSubmit:e,register:t,errors:a,handleSubmit:r,isEdit:i}=this.props;return(0,s.jsxs)("form",{onSubmit:r(e),className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(K,{...t("title",{required:!0}),placeholder:"Product title"}),a.title&&(0,s.jsx)("p",{className:"text-sm text-red-500 mt-1",children:"Title is required"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(es,{...t("description",{required:!0}),placeholder:"Description"}),a.description&&(0,s.jsx)("p",{className:"text-sm text-red-500 mt-1",children:"Description is required"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(K,{type:"number",step:"0.01",...t("price",{required:!0,min:0}),placeholder:"Price"}),a.price&&(0,s.jsx)("p",{className:"text-sm text-red-500 mt-1",children:"Valid price is required"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(K,{...t("category",{required:!0}),placeholder:"Category"}),a.category&&(0,s.jsx)("p",{className:"text-sm text-red-500 mt-1",children:"Category is required"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(K,{...t("image",{required:!0}),placeholder:"Image URL"}),a.image&&(0,s.jsx)("p",{className:"text-sm text-red-500 mt-1",children:"Image URL is required"})]}),(0,s.jsx)(b,{type:"submit",className:"w-full",children:i?"Save Changes":"Create Product"})]})}}function ei(e){let{onSuccess:t}=e,{register:a,handleSubmit:r,formState:{errors:i}}=(0,ea.mN)(),{addProduct:l}=c();return(0,s.jsxs)("div",{className:"max-w-xl mx-auto p-10",children:[(0,s.jsx)("h1",{children:"Create New Product"}),(0,s.jsx)(er,{onSubmit:e=>{l({...e,id:Date.now(),rating:{rate:0,count:0}}),t()},register:a,errors:i,handleSubmit:r})]})}er.defaultProps={isEdit:!1};let el=e=>{let{productId:t,onBack:a}=e,{selectedProduct:i,fetchProductById:l,updateProduct:n,loading:o}=c(),{register:d,handleSubmit:u,reset:m,formState:{errors:x}}=(0,ea.mN)();return((0,r.useEffect)(()=>{l(t)},[t,l]),(0,r.useEffect)(()=>{i&&m({title:i.title,description:i.description,price:i.price,category:i.category,image:i.image})},[i,m]),o||!i)?(0,s.jsx)("p",{className:"p-6",children:"Loading product..."}):(0,s.jsxs)("div",{className:"max-w-xl mx-auto p-10",children:[(0,s.jsx)("h1",{children:"Edit Product"}),(0,s.jsx)(er,{onSubmit:e=>{n({...e,id:t,rating:(null==i?void 0:i.rating)||{rate:0,count:0}}),a()},register:d,errors:x,handleSubmit:u,isEdit:!0})]})};function en(){let{selectedProduct:e,setSelectedProduct:t}=c(),[a,i]=(0,r.useState)(!1),[l,n]=(0,r.useState)(!1),o=()=>{t(null),i(!1),n(!1)};return(0,s.jsx)("div",{className:"app py-6 lg:py-10",children:(0,s.jsx)("div",{className:"container",children:e&&l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b,{onClick:o,variant:"link",children:"← Back to catalog"}),(0,s.jsx)(el,{productId:e.id,onBack:o})]}):e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b,{onClick:o,variant:"link",className:"!mb-6",children:"← Back to catalog"}),(0,s.jsx)(et,{onEdit:()=>n(!0)})]}):a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b,{onClick:o,variant:"link",children:"← Back to catalog"}),(0,s.jsx)(ei,{onSuccess:o})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex justify-end mb-4",children:(0,s.jsx)(b,{onClick:()=>i(!0),children:"+ Add Product"})}),(0,s.jsx)(ee,{})]})})})}el.displayName="ProductEdit"},4415:(e,t,a)=>{Promise.resolve().then(a.bind(a,1918))}},e=>{var t=t=>e(e.s=t);e.O(0,[844,596,441,684,358],()=>t(4415)),_N_E=e.O()}]);